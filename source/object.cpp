#include "object.h"

#include <PA9.h>

sObject::sObject()
{
  m_w = m_h = 8;
  m_sprite_id = -1;
  m_current_animation = -1;
  m_dead = false;
}

//--------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------
void sObject::move(int screen_scrolled)
{
  PA_SetSpriteXY(0, m_sprite_id, (m_x-m_w)-screen_scrolled, (m_y-m_h));
}

//--------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------
bool sObject::exists(void)
{
  if(m_sprite_id != -1)
    return true;
  return false;
}

//--------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------
void sObject::create(int sprite_id)
{
  m_sprite_id = sprite_id;
  PA_CreateSprite(0, m_sprite_id, m_sprite, OBJ_SIZE_16X16, 1, m_palette_index, m_x-m_w, m_y-m_h);
  if(m_dead)
    begin_animation(1);
  else
    begin_animation(0);
}

//--------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------
void sObject::destroy(void)
{
  if(m_sprite_id != -1)
  {
    stop_animation();
    PA_DeleteSprite(0, m_sprite_id);
    m_sprite_id = -1;
  }
}

//--------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------
int sObject::get_sprite_id()
{
  return m_sprite_id;
}

//--------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------
void sObject::report_collision_vs_world(int x, int y, double dx, double dy)
{
}

void sObject::die()
{
  m_dead = true;
  begin_animation(1);
}

bool sObject::dead()
{
  return m_dead;
}

